<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="./style/routines.css">
    <title>Rutinas-T&T</title>
</head>
<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-sm justify-content-between">
            <!-- Brand/logo -->
            <a class="navbar-brand d-flex align-items-center"th:href="@{/user/home}">
                <img src="./assets/logo.png" title="Logotipo del aplicativo" alt="logo" style="width:80px;">
                <h1 class="pt-3">Treatment Tracer</h1>
            </a>

            <!-- Links -->
            <ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" th:href="${withoutDisease==true}?'#':@{/treatments}">Tratamientos</a></li>
				<li class="nav-item"><a class="nav-link" th:href="${withoutDisease==true}?'#':@{/routines}">Rutinas</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/medicalAppointments}">Citas médicas</a></li>
				<li class="nav-item"><a class="nav-link" href="files">Archivos médicos</a></li>
				<li class="nav-item">
					<form th:action="@{/logout}" method="post">
						<input type="submit" class="nav-link btn btn-info logout"
							value="Cerrar Sesion" />
					</form>
				</li>
			</ul>
        </nav>
        <div class="body routine">
            <div aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a th:href="@{/user/home}">Inicio</a></li>
                    <li class="breadcrumb-item active" title="Usted está aquí" aria-current="page">Rutinas</li>
                </ol>
            </div>
            
            <div class="row pt-5">
				<div class="col-4 offset-2">
				
					<form th:action="@{/routines}" method=POST>
								<select name="order">
									<option value="-1">Ordenar por</option>
									<option value="3">Fecha de activación</option>
									<option value="2">Nombre z-a</option>
									<option value="1">Nombre a-z</option>
									<option value="4">Enfermedad asociada</option>
								</select> 
								<input class="btn btn-success mx-1" type="submit" value="Filtrar">
					</form>
					
				
				</div>
			
			</div>
    
            <div class="row">
                <div class="col-11 mx-auto table-responsive">
                    <table class="table">
                        <thead class="bg-info text-center">
                            <tr>
                                <th colspan="6">RUTINAS</th>
                            </tr>
                            <tr>
                                <th scope="col">Nombre</th>
                                <th scope="col">Posología</th>
                                <th scope="col">Duración</th>
                                <th scope="col">Enfermedad asociada</th>
                                <th scope="col">Acciones</th>
                                <th scope="col">Mediciones</th>
                            </tr>
                        </thead>
                        <tbody>
                        
                        
                        	<div th:each="rout:${routines}">
								<tr>
								<form th:action="@{/updateRoutine}">
									<td><label for="name" title="nombre de la rutina"><input
											type="text" name="name" title="nombre de la rutina"
											id="name" th:value="${rout.name}"></label></td>
									<td><label for="posology"
										title="posología de la rutina"><input type="text"
											name="posology" title="posología de la rutina"
											id="posology" th:value="${rout.posology}"></label></td>
									<td><label for="duration" title="duración de la rutina"><input
											type="text" name="duration" title="duración de la rutina"
											id="duration" th:value="${rout.duration}"></label></td>
									<td><label for="disease" title="Enfermedad asociada"><input
											type="text" name="disease" title="Enfermedad asociada"
											id="disease" th:value="${rout.disease.name}" disabled></label></td>
											<input name="id" th:value="${rout.id}" type="hidden">
									
								<td class="text-center">			
									<input type="submit" class="btn update" value="Actualizar">
								</form>
									<form th:action="@{/activeRoutine}" method=POST>
										<input name="idUpdate" th:value="${rout.id}" type="hidden"> 
										<div th:if="${rout.routineState.id==1}">
										<input type="submit" class="btn actived" value="Desactivar">
										</div>
										<div th:if="${rout.routineState.id==2}">
										<input type="submit" class="btn actived" value="Activar">
										</div>
									</form>
									
									<form th:action="@{/removeRoutine}" method=POST>
										<input name="id" th:value="${rout.id}" type="hidden"> 
										<input type="submit" class="btn delete" value="Borrar">
									</form>
								</td>
								<td>		<form th:action="@{/measurements}" method=POST>
												<input name="routineId" th:value="${rout.id}" type="hidden"> 
												<input type="submit" class="btn measures" value="Ver mediciones">
											</form></td>
							</tr>
							</div>
                            
                            <tr>
                                <form th:action="@{/createRoutine}">
									<td><label for="name" title="nombre de la rutina"><input
											type="text" name="name" title="nombre de la rutina"
											id="name"></label></td>
									<td><label for="posology"
										title="posología de la rutina"><input type="text"
											name="posology" title="posología de la rutina"
											id="posology"></label></td>
									<td><label for="duration" title="duración de la rutina"><input
											type="text" name="duration" title="duración de la rutina"
											id="duration"></label></td>
									<td><label for="disease" title="Enfermedad asociada">
										<select type="text" name="disease" title="Enfermedad asociada" id="disease">
											<div th:each="dis:${diseases}">
												<option th:value="${dis.id}" th:text="${dis.name}"></option>
											</div>
										</select>
										</label>
									</td>
									<td class="text-center"><input class="btn add"
										type="submit" value="Añadir rutina"></td>
								</form>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        

        <div class="modal fade" id="measurements" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">REGISTRAR UNA NUEVA MEDICIÓN</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>ESTAS REGISTRANDO UNA NUEVA SECCIÓN DE MEDICIONES PARA LA RUTINA XXXXXXXXX</p>
                    <p>En primer lugar, realize la medición e inserte el valor obtenido en el 
                        siguiente campo:</p>
                    <form action="" class="text-center">
                        <label for="valueMeasurement" title="nombre del archivo"><strong>Valor de medición:</strong> <br>
                            <input type="text" name="valueMeasurement" id="valueMeasurement" title="Valor de la medición"></label><br>
                            <br><p class="text-left">Por último seleccione la unidad de medida de la medición (g/L , 
                                g/dL ...)</p>
                        <label for="unitMeasurement" title="Descripción del archivo"><strong>Unidad de medida:</strong> <br>
                            <input type="text" name="unitMeasurement" id="unitMeasurement" title="Unidad de medida"></label><br>

                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn formbutton">Registrar</button>
                </div>
            </div>
        </div>
    </div>

        
    <script type='text/javascript' src="./jquery/jquery-3.4.1.min.js"></script>
    <script src="./jquery/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>

        <script src="./Javascript/script.js"></script>
    
</body>
</html>